{% set class = 'post-permalink' %}
{% extends '_master.twig' %}

{% block content %}
{% set id,title_id,post_id = hashid(post.community.id), hashid(post.community.title_id), hashid(post.id) %}
			<div id="header">
				<div id="header-body">
					<h1 id="page-title"><span>{{ post.user.username }}'s post</span></h1>
				</div>
			</div>
			<div id="post-permalink-content">
				<div id="header-meta">
					<p class="community-container">
						<a href="{{ route('title.community', [ title_id, id ]) }}" class="community" data-pjax="1">
							<span class="community-container-inner">
								<img src="/img/icons/{{ post.community.icon }}" class="community-icon" width="14" height="14">{{ post.community.name }}
							</span>
						</a>
					</p>
				</div>
				<div id="post-permalink-body" class="post scroll post-subtype-default">
					<a href="/users/rip_akndedfd6" data-pjax="1" class="user-icon-container scroll-focus">
						<img src="/img/icons/{{ post.community.icon }}" class="user-icon" width="32" height="32">
					</a>
					<header>
						<div class="header-inner">
							<p class="user-name"><a href="/users/rip_akndedfd6" data-pjax="1">{{ post.user.username }}</a></p>
							<p class="timestamp-container">
								<a class="timestamp">{{ post.created }}</a>
								{% if post.spoiler %}
									·
									<span class="spoiler">Spoilers</span>
								{% endif %}
							</p>
						</div>
					</header>
					<div class="post-content">
						{% if post.content != '' %}
							<p class="post-content-text">{{ post.content }}</p>
						{% endif %}
						{% if post.image %}
							<p class="post-content-memo"><img src="/img/drawings/{{ post.image }}"></p>
						{% endif %}
					</div>
					<div class="post-meta">
						<div class="report-buttons-content">
							<a href="/posts/AYECAAAEAAAsUZ8kdJ0K7Q/violations.create" role="button" class="report-button" data-pjax="1">Report Violation</a>
						</div>
						<div class="expression">
							<button type="button" disabled="" class="symbol submit empathy-button" data-feeling="normal" data-action="/posts/AYECAAAEAAAsUZ8kdJ0K7Q/empathies" data-other-empathy-count="0"><span class="empathy-button-text">Yeah!</span></button>
						</div>
					</div>
				</div>
			</div>
			<div class="body-content">
				<div id="post-permalink-comments">
					<ul class="post-permalink-reply  list reply-list" data-parent-post-id="{{ post_id }}">
						{% for comment in comments %}
							{% set profile,comment_id = route('user.profile', [ comment.user.usernameClean ]), hashid(comment.id) %}
							<li class="test-reply scroll {% if comment.user.id == post.user.id %}my{% else %}other{% endif %} {% if comment.spoiler %}hidden{% endif %}" {% if comment.spoiler %}data-href-hidden="#"{% endif %}>
								<a href="{{ profile }}" data-pjax="1" class="user-icon-container scroll-focus">
									<img src="/img/icons/{{ post.community.icon }}" class="user-icon" width="32" height="32">
								</a>
								<div class="reply-body">
									<header>
										<div class="header-inner">
											<p class="user-name"><a href="{{ profile }}" data-pjax="1">{{ comment.user.username }}</a></p>
											<p class="timestamp-container">
												{{ comment.created }}
												{% if comment.spoiler %}
													·
													<span class="spoiler">Spoilers</span>
												{% endif %}
											</p>
										</div>
									</header>
									{% if comment.content != '' %}
										<p class="reply-content-text">{{ comment.content }}</p>
									{% endif %}
									{% if comment.image %}
										<p class="reply-content-memo"><img src="/img/drawings/{{ comment.image }}"></p>
									{% endif %}
									{% if comment.spoiler and comment.user.id != user.id %}
										<div class="hidden-content"><p>This comment contains spoilers.</p>
											<button type="button" class="hidden-content-button">View comment</button>
										</div>
									{% endif %}
									<div class="reply-meta">
										<button type="button" disabled="" class="symbol submit empathy-button reply disabled" data-feeling="normal" data-action="{#{ route('post.like', [ comment_id ]) }#}"><span class="empathy-button-text">Yeah!</span></button>
										<span class="empathy symbol"><span class="symbol-label">Yeahs</span><span class="empathy-count">0</span></span>
										{% if comment.user.id != user.id %}
											<div class="report-buttons-content">
												<a href="{#{ route('comment.report', [ comment_id ]) }#}" role="button" class="button report-button" data-pjax="1">Report Violation</a>
											</div>
										{% endif %}
									</div>
								</div>
							</li>
						{% endfor %}
					</ul>
				</div>
				<div>
					<a href="{{ route('post.reply', [ post_id ]) }}" class="post-button reply-button test-reply-button" data-pjax="1"><span class="symbol">Comment</span></a>
				</div>
			</div>
{% endblock %}